{"ast":null,"code":"import { GlobalConstants } from 'src/app/service/global.variables';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { ImageModalComponent } from '../album-view/image-modal/image-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../service/auth/auth.service\";\nimport * as i2 from \"../../service/images/images.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../service/user/user.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"../../nav/navbar.component\";\nimport * as i7 from \"angular-bootstrap-md\";\nimport * as i8 from \"@angular/material/tabs\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"../../nav/footer/footer.component\";\nimport * as i11 from \"safe-pipe\";\n\nfunction ProfileComponent_ng_container_25_figcaption_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"figcaption\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r4);\n  }\n}\n\nfunction ProfileComponent_ng_container_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0, 12);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"img\", 14);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_25_Template_img_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const f_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.openModal(f_r1);\n    });\n    i0.ɵɵpipe(3, \"safe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ProfileComponent_ng_container_25_figcaption_4_Template, 2, 1, \"figcaption\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const f_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind2(3, 2, ctx_r0.serverURI + \"/images/file/\" + f_r1, \"url\"), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.thumbnailCaption[i_r2]);\n  }\n}\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(authService, imageService, actRoute, userService, dialog) {\n      this.authService = authService;\n      this.imageService = imageService;\n      this.actRoute = actRoute;\n      this.userService = userService;\n      this.dialog = dialog;\n      this.currentUser = [];\n      this.thumbnailName = [];\n      this.thumbnailCaption = [];\n      this.destroy$ = new Subject();\n      let id = this.actRoute.snapshot.paramMap.get('id');\n      this.serverURI = GlobalConstants.serverURI;\n      let uid = localStorage.getItem('uid');\n      this.authService.getUserProfile(uid).subscribe(res => {\n        this.currentUser = res.msg;\n      });\n    }\n\n    ngOnInit() {\n      this.myFavorites();\n    }\n\n    myFavorites() {\n      var user_id = localStorage.getItem('uid');\n      this.userService.GetMyFavorites(user_id).pipe(takeUntil(this.destroy$)).subscribe(response => {\n        // console.log(response.favorites);      \n        let result = response.favorites.map(({\n          _id\n        }) => _id); // this.displayFavorites(result);\n        // console.log(result);      \n\n        result.forEach(element => {\n          this.displayFavorites(element);\n        });\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    displayFavorites(id) {\n      this.imageService.GetFavorite(id).pipe(takeUntil(this.destroy$)).subscribe(imgData => {\n        // console.log(imgData);\n        var f = new Array(imgData.filename);\n        this.thumbnailName.push(f);\n        var c = new Array(imgData.metadata.caption);\n        this.thumbnailCaption.push(c);\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    openModal(filename) {\n      this.imageService.OpenImage(filename).pipe(takeUntil(this.destroy$)).subscribe(img => {\n        this.dialog.open(ImageModalComponent, {\n          height: '100%',\n          width: 'auto',\n          data: {\n            imageData: img\n          }\n        });\n      });\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next(true); // Unsubscribe from the subject\n\n      this.destroy$.unsubscribe();\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ImagesService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.MatDialog));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 31,\n    vars: 4,\n    consts: [[1, \"pageView\"], [1, \"row\"], [1, \"col-3\"], [1, \"inner-main\"], [1, \"mb-4\"], [1, \"col-9\"], [\"dynamicHeight\", \"\"], [\"label\", \"My Favorites\"], [\"class\", \"thumbgal\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"accent\", \"label\", \"Activity\"], [1, \"galHolder\", \"mat-elevation-z4\"], [1, \"coming-soon\"], [1, \"thumbgal\"], [1, \"col-6\", \"col-md-3\", \"my-3\"], [\"alt\", \"thumbnail\", 1, \"thumbimg\", \"img-thumbnail\", \"z-depth-1\", 3, \"src\", \"click\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"mdb-card\");\n        i0.ɵɵelementStart(5, \"mdb-card-body\");\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵelementStart(7, \"h2\", 4);\n        i0.ɵɵtext(8, \"User Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p\");\n        i0.ɵɵelementStart(10, \"strong\");\n        i0.ɵɵtext(11, \"First Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵelementStart(14, \"strong\");\n        i0.ɵɵtext(15, \"Last Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"p\");\n        i0.ɵɵelementStart(18, \"strong\");\n        i0.ɵɵtext(19, \"Email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 5);\n        i0.ɵɵelementStart(22, \"mat-tab-group\", 6);\n        i0.ɵɵelementStart(23, \"mat-tab\", 7);\n        i0.ɵɵelementStart(24, \"div\", 1);\n        i0.ɵɵtemplate(25, ProfileComponent_ng_container_25_Template, 5, 5, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"mat-tab\", 9);\n        i0.ɵɵelementStart(27, \"div\", 10);\n        i0.ɵɵelementStart(28, \"div\", 11);\n        i0.ɵɵtext(29, \"\\u26A0 Coming Soon! \\u26A0\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"app-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\" \", ctx.currentUser.firstName, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.currentUser.lastName, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.currentUser.email, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.thumbnailName);\n      }\n    },\n    directives: [i6.NavbarComponent, i7.MdbCardComponent, i7.MdbCardBodyComponent, i8.MatTabGroup, i8.MatTab, i9.NgForOf, i10.FooterComponent],\n    pipes: [i11.ɵa],\n    styles: [\".pageView[_ngcontent-%COMP%]{height:100%}.galHolder[_ngcontent-%COMP%]{margin:16px;padding:16px;border-radius:8px;height:auto;width:98%}.thumbimg[_ngcontent-%COMP%]{min-height:200px;max-height:200px;min-width:100%;cursor:pointer}figcaption[_ngcontent-%COMP%]{color:#3cb371;font-style:italic;font-weight:700;font-size:18px;padding-top:1%;font-family:\\\"Thasadith\\\"}.coming-soon[_ngcontent-%COMP%]{font-size:24px;color:#daa520}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}