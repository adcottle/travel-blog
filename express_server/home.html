<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
</head>
<body>
  <!-- Upload form -->
  <form id="form-gridfs">
    <label for="file-input">Caption</label>
    <input id="caption" type="text" name="caption" accept="*" />
    <label for="file-input">City</label>
    <input id="city" type="text" name="city" accept="*" />
    <label for="file-input">State</label>
    <input id="state" type="text" name="state" accept="*" />
    <label for="file-input">Country</label>
    <input id="country" type="text" name="country" accept="*" />
    <label for="photo_date">Photo Date:</label>
    <input type="date" id="photo_date" name="photo_date"> 
    <label for="file-input">Upload your file:</label>
    <input id="file-input" type="file" name="file" accept="*" />
    <br />
    <span style="color:green" id="success-msg"></span>
    <span style="color:red" id="fail-msg"></span>
  </form>
  <br />
  <!-- Javascript functions -->
  <script>
    $(document).ready(function() {
      $("#file-input").on("change", uploadFile);

    });
    function uploadFile() {
      $.ajax({
        url: "images/upload",
        type: "POST",
        data: new FormData($("#form-gridfs")[0]),
        enctype: 'multipart/form-data',
        processData: false,
        contentType: false,
        cache: false,
        success: function () {          
          $("#success-msg").text("File uploaded succesfully!");
        },
        error: function (xhr) {
          $("#fail-msg").text("Oops something went wrong! File not uploaded!!");
          console.log(xhr.responseText);            
        }
      });
    } 
  </script>
</body>
</html>